<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Equations · MicroMagnetic.jl</title><meta name="title" content="Equations · MicroMagnetic.jl"/><meta property="og:title" content="Equations · MicroMagnetic.jl"/><meta property="twitter:title" content="Equations · MicroMagnetic.jl"/><meta name="description" content="Documentation for MicroMagnetic.jl."/><meta property="og:description" content="Documentation for MicroMagnetic.jl."/><meta property="twitter:description" content="Documentation for MicroMagnetic.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><script src="../assets/init.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">MicroMagnetic.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../basics/">Basics</a></li><li><a class="tocitem" href="../units/">Units</a></li><li><span class="tocitem">Tutorials</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Micromagnetics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../tutorials/micromagnetics/nanobar/">Nanobar</a></li><li><a class="tocitem" href="../tutorials/micromagnetics/vortex/">Magnetic vortex</a></li><li><a class="tocitem" href="../tutorials/micromagnetics/std4_sim_with/">Standard Problem 4 (sim_with)</a></li><li><a class="tocitem" href="../tutorials/micromagnetics/std4/">Standard Problem 4</a></li><li><a class="tocitem" href="../tutorials/micromagnetics/std5_sim_with/">Standard Problem 5 (sim_with)</a></li><li><a class="tocitem" href="../tutorials/micromagnetics/std5/">Standard Problem 5</a></li><li><a class="tocitem" href="../tutorials/micromagnetics/skyrmion_stt/">Skyrmion dynamics under spin transfer torques</a></li><li><a class="tocitem" href="../tutorials/micromagnetics/stoner_wohlfarth/">Stoner–Wohlfarth model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Atomistic</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../tutorials/atomistic/skyrmion/">Magnetic skyrmion</a></li><li><a class="tocitem" href="../tutorials/atomistic/skyrmion_lattice/">Skyrmion lattice</a></li><li><a class="tocitem" href="../tutorials/atomistic/skyrmion_afm/">Antiferromagnetic skyrmion</a></li><li><a class="tocitem" href="../tutorials/atomistic/sllg/">Stochastic LLG</a></li><li><a class="tocitem" href="../tutorials/atomistic/phase_diagram/">Phase diagram</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Monte carlo</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../tutorials/monte_carlo/M_T_curve/">M-T curve using Monte Carlo</a></li><li><a class="tocitem" href="../tutorials/monte_carlo/skyrmion/">Skyrmion Phase using Monte Carlo</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Neb</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../tutorials/neb/neb_skx/">Skyrmion collapse using NEB</a></li></ul></li></ul></li><li class="is-active"><a class="tocitem" href>Equations</a><ul class="internal"><li><a class="tocitem" href="#Atomistic-spin-model"><span>Atomistic spin model</span></a></li><li><a class="tocitem" href="#Micromagnetic-model"><span>Micromagnetic model</span></a></li><li><a class="tocitem" href="#LLG-equation"><span>LLG equation</span></a></li><li><a class="tocitem" href="#LLG-equation-with-extensions"><span>LLG equation with extensions</span></a></li><li><a class="tocitem" href="#SLLG-equation"><span>SLLG equation</span></a></li><li><a class="tocitem" href="#Steepest-descent-method"><span>Steepest descent method</span></a></li><li><a class="tocitem" href="#Monte-Carlo-Simulation"><span>Monte Carlo Simulation</span></a></li><li><a class="tocitem" href="#NEB-(Nudged-elastic-band)"><span>NEB (Nudged elastic band)</span></a></li></ul></li><li><a class="tocitem" href="../api/">API for users</a></li><li><a class="tocitem" href="../api_dev/">API for developers</a></li><li><a class="tocitem" href="../contrib/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Equations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Equations</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/MagneticSimulation/MicroMagnetic.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/MagneticSimulation/MicroMagnetic.jl/blob/master/docs/src/equations.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Equations"><a class="docs-heading-anchor" href="#Equations">Equations</a><a id="Equations-1"></a><a class="docs-heading-anchor-permalink" href="#Equations" title="Permalink"></a></h1><h2 id="Atomistic-spin-model"><a class="docs-heading-anchor" href="#Atomistic-spin-model">Atomistic spin model</a><a id="Atomistic-spin-model-1"></a><a class="docs-heading-anchor-permalink" href="#Atomistic-spin-model" title="Permalink"></a></h2><p>The basic assumption of the atomistic spin model is that each lattice site is associated with a magnetic moment <span>$\mu_s$</span>. For metal systems with quenched orbital moments, the magnetic moment is mainly related to its spin angular momentum</p><p class="math-container">\[\mathbf{\mu} = - g \mu_B \mathbf{S} = - \hbar  \gamma \mathbf{S}\]</p><p>where <span>$\mu_B=e \hbar /(2m)$</span> is the Bohr magneton, <span>$e(&gt;0)$</span> is the electron charge,  <span>$\gamma=g\mu_B/\hbar (&gt;0) $ is the gyromagnetic ratio, $g=2$</span> is the g-factor.  The LLG equation governs the dynamics of the magnetic moment,  which reads</p><p class="math-container">\[\frac{\partial \mathbf{m}}{\partial t} = - \gamma \mathbf{m} \times \mathbf{H}_\mathrm{eff} + \alpha \mathbf{m} \times  \frac{\partial \mathbf{m}}{\partial t}\]</p><p>where <span>$\mathbf{m}$</span> is the unit vector of the magnetic moment, <span>$\mathbf{H}_\mathrm{eff}$</span> is the effective field.</p><p>Unlike the continuous micromagnetic model, the atomistic spin model is discrete, and thus, the effective field <span>$\mathbf{H}_\mathrm{eff}$</span> is defined as the partial derivative of the total Hamiltonian with respect to <span>$\mathbf{m}$</span>, i.e., </p><p class="math-container">\[\mathbf{H}_{\mathrm{eff}}=-\frac{1}{\mu_s} \frac{\partial \mathcal{H}}{\partial \mathbf{m}}\]</p><p>where <span>$\mathcal{H}$</span> is the total Hamiltonian including the exchange interaction, Dzyaloshinskii-Moriya interaction, dipolar interaction, anisotropy interaction,  Zeeman interaction and so on.  </p><p>The exchange interaction is given by</p><p class="math-container">\[\mathcal{H}_\mathrm{ex} = -J \sum_{\langle i, j\rangle} \mathbf{m}_{i} \cdot \mathbf{m}_{j}\]</p><p>where <span>$J$</span> denotes the exchange constant and <span>$\langle i,j \rangle$</span> represents a unique pair between lattice sites <span>$i$</span> and <span>$j$</span> and we assume that the summation is taken only once for each pair. A positive <span>$J$</span> results in the ferromagnetic state while a negative <span>$J$</span> leads to the antiferromagnetic state, which can be seen by minimizing the exchange Hamiltonian. To solve the LLG equation numerically, we need the effective field at each site, which is given </p><p class="math-container">\[\mathbf{H}_\mathrm{ex, i} = \frac{J}{\mu_s} \sum_{\langle i, j\rangle} \mathbf{m}_{j}.\]</p><p>Similarly, the Dzyaloshinskii-Moriya interaction reads</p><p class="math-container">\[\mathcal{H}_\mathrm{dmi} =  \sum_{\langle i, j\rangle}  \mathbf{D}_{i j} \cdot\left(\mathbf{m}_{i} \times \mathbf{m}_{j}\right)\]</p><p>where <span>$\mathbf{D}_{i j}$</span> is the DM vector.  Typically, there are two situations: (1) <span>$\mathbf{D}_{i j} = D \hat{r}_{ij}$</span>, which corresponds to the Bulk DMI. (2) <span>$\mathbf{D}_{i j} = D \hat{r}_{ij} \times \hat{z}$</span>, which corresponds to the interfacial DMI. Unlike the exchange interaction, the DM Hamiltonian is minimal when the two adjacent magnetic moments are perpendicular. The corresponding effective field can be computed by</p><p class="math-container">\[\mathbf{H}_\mathrm{dmi, i} = \frac{1}{\mu_s} \sum_{\langle i, j\rangle} \mathbf{D}_{i j} \times \mathbf{m}_{j}.\]</p><p>The other two common interactions are the anisotropy and the Zeeman, which are given by</p><p class="math-container">\[\mathcal{H}_\mathrm{an} = - K \sum_{i}\left(\mathbf{m}_{i} \cdot \hat{u}\right)^{2} \\
\mathcal{H}_\mathrm{ze} =  - \mu_s \mathbf{m}_i \cdot \mathbf{H}\]</p><p>The effective field of the anisotropy is </p><p class="math-container">\[\mathbf{H}_\mathrm{an, i} = \frac{2K}{\mu_s}  (\mathbf{m}_{i} \cdot \hat{u}) \hat{u}.\]</p><h3 id="Multiferroic-Insulators"><a class="docs-heading-anchor" href="#Multiferroic-Insulators">Multiferroic Insulators</a><a id="Multiferroic-Insulators-1"></a><a class="docs-heading-anchor-permalink" href="#Multiferroic-Insulators" title="Permalink"></a></h3><p>For multiferroics such as Cu<span>$_2$</span>OSeO<span>$_3$</span>, the noncollinear spin texture induces a local electric polarization via the the <span>$d-p$</span> hybridization mechanism. The local electric dipole moment <span>$\mathbf{P}$</span> depends on the direction of the applied static magnetic field relative to the crystallographic axes.[PRL 128, 037201 (2022)] </p><h5 id="H_0//001:"><a class="docs-heading-anchor" href="#H_0//001:"><span>$H_0//001$</span>:</a><a id="H_0//001:-1"></a><a class="docs-heading-anchor-permalink" href="#H_0//001:" title="Permalink"></a></h5><p class="math-container">\[\mathbf{P}_i=\lambda\left(-m_{i, z} m_{i, x}, m_{i, y} m_{i, z}, \frac{-m_{i, x}^2+m_{i, y}^2}{2}\right)\]</p><h5 id="H_0//110:"><a class="docs-heading-anchor" href="#H_0//110:"><span>$H_0//110$</span>:</a><a id="H_0//110:-1"></a><a class="docs-heading-anchor-permalink" href="#H_0//110:" title="Permalink"></a></h5><p class="math-container">\[\mathbf{P}_i=\lambda\left(-m_{i, x} m_{i, y}, \frac{-m_{i, x}^2+m_{i, z}^2}{2}, m_{i, y} m_{i, z}\right)\]</p><h5 id="H_0//111:"><a class="docs-heading-anchor" href="#H_0//111:"><span>$H_0//111$</span>:</a><a id="H_0//111:-1"></a><a class="docs-heading-anchor-permalink" href="#H_0//111:" title="Permalink"></a></h5><p class="math-container">\[\mathbf{P}_{i,x}=-\lambda \frac{m_{i, x}\left(\sqrt{2} m_{i, y}+m_{i, z}\right)}{\sqrt{3}} \\

\mathbf{P}_{i,y} = \lambda \frac{-m_{i, x}^2+m_{i, y}\left(m_{i, y}-\sqrt{2} m_{i, z}\right)}{\sqrt{6}} \\

\mathbf{P}_{i,z} =
-\lambda \frac{m_{i, x}^2+m_{i, y}^2-2 m_{i, z}^2}{2 \sqrt{3}}\]</p><p>The Hamiltonian related to the high-frequency lasers is given by </p><p class="math-container">\[\mathcal{H}_\mathrm{laser} =  -\sum_{i} \mu_s \mathbf{m}_i \cdot \mathbf{H}(t) - \sum_{i} \mathbf{P}_i \cdot \mathbf{E}(t)\]</p><p>The corresponding effective fields associated with the electric field are</p><h5 id="H_0//001:-2"><a class="docs-heading-anchor" href="#H_0//001:-2"><span>$H_0//001$</span>:</a><a class="docs-heading-anchor-permalink" href="#H_0//001:-2" title="Permalink"></a></h5><p class="math-container">\[H_x = \frac{\lambda}{\mu_s}  (-E_z m_x  - E_x m_z )\\
H_y = \frac{\lambda}{\mu_s}  (E_z m_y  + E_y m_z )\\
H_z = \frac{\lambda}{\mu_s}  (-E_x m_x  + E_y m_y )\\\]</p><h5 id="H_0//110:-2"><a class="docs-heading-anchor" href="#H_0//110:-2"><span>$H_0//110$</span>:</a><a class="docs-heading-anchor-permalink" href="#H_0//110:-2" title="Permalink"></a></h5><p class="math-container">\[H_x = \frac{\lambda}{\mu_s}  (-E_y m_x  - E_x m_y )\\
H_y = \frac{\lambda}{\mu_s}  (-E_x m_x  + E_z m_z )\\
H_z = \frac{\lambda}{\mu_s}  (E_z m_y  + E_y m_z )\\\]</p><h5 id="H_0//111:-2"><a class="docs-heading-anchor" href="#H_0//111:-2"><span>$H_0//111$</span>:</a><a class="docs-heading-anchor-permalink" href="#H_0//111:-2" title="Permalink"></a></h5><p class="math-container">\[H_x = -\frac{\lambda}{\sqrt{3}\mu_s}  (\sqrt{2}(E_y m_x + E_x m_y)  +E_z m_x + E_x m_z )\\
H_y = -\frac{\lambda}{\sqrt{3}\mu_s}  (\sqrt{2}(E_x m_x - E_y m_y)  +E_z m_y + E_y m_z )\\
H_z = -\frac{\lambda}{\sqrt{3}\mu_s}  (E_x m_x  + E_y m_y - 2 E_z m_z)\\\]</p><h2 id="Micromagnetic-model"><a class="docs-heading-anchor" href="#Micromagnetic-model">Micromagnetic model</a><a id="Micromagnetic-model-1"></a><a class="docs-heading-anchor-permalink" href="#Micromagnetic-model" title="Permalink"></a></h2><p>In micromagnetics, the effective field can be computed from the total micromagnetic energy</p><p class="math-container">\[\mathbf{H}_{\mathrm{eff}}=-\frac{1}{\mu_{0} M_{s}} \frac{\delta E}{\delta \mathbf{m}}\]</p><p>The typical energy terms are</p><ul><li><strong>Exchange energy</strong></li></ul><p class="math-container">\[  E_\mathrm{ex} = \int_{V} A (\nabla \mathbf{m})^2 \mathrm{d}V\]</p><p>where <span>$(\nabla \mathbf{m})^{2}=\left(\nabla m_{x}\right)^{2}+\left(\nabla m_{y}\right)^{2}+\left(\nabla m_{z}\right)^{2}$</span>. So the corresponding effective field is</p><p class="math-container">\[  \mathbf{H}_{\mathrm{ex}}=\frac{2 A}{\mu_{0} M_{s}} \nabla^{2} \mathbf{m}\]</p><ul><li><strong>Zeeman energy</strong></li></ul><p class="math-container">\[  E_\mathrm{ex} = -  \mu_0 \int_{V}  \mathbf{H} \cdot \mathbf{M} \mathrm{d}V\]</p><p>as expected, the effective field is <span>$\mathbf{H}$</span>.</p><ul><li><p><strong>Anisotropy</strong></p><p>The uniaxial anisotropy energy is given by</p></li></ul><p class="math-container">\[  E_\mathrm{anis} = -\int_{V} K_{u} (\mathbf{m} \cdot \hat{u})^2 \, dV\]</p><p>from which the effective field can be computed as</p><p class="math-container">\[  \mathbf{H}_{\mathrm{an}}=\frac{2 K_u}{\mu_0 M_s}\left(\mathbf{m} \cdot \hat{u}\right) \hat{u}\]</p><ul><li><p><strong>Cubic Anisotropy</strong></p><p>The cubic anisotropy energy is given by</p></li></ul><p class="math-container">\[  E_\mathrm{cubic} = -\int_{V} K_c (m_x^4 + m_y^4 + m_z^4) \, dV\]</p><p>and thus the corresponding effective field reads</p><p class="math-container">\[  \mathbf{H}_{\mathrm{cubic}}= \frac{4 K_c}{\mu_0 M_s}  
  \left( m_x^3 \mathbf{e}_x + m_y^3 \mathbf{e}_y + m_z^3 \mathbf{e}_z \right)\]</p><ul><li><p><strong>Hexagonal Anisotropy</strong></p><p>The energy density of the hexagonal anisotropy is given by:</p></li></ul><p class="math-container">\[E = K_1 \sin^2 \theta + K_2 \sin^4 \theta + K_3 \sin^6 \theta \cos 6\phi\]</p><p>Here, <span>$\theta$</span> is the angle between the magnetization vector <span>$\mathbf{m}$</span> and the <span>$c$</span>-axis (<span>$z$</span>-axis). <span>$\phi$</span> is the angle of the projection of <span>$\mathbf{m}$</span> on the hexagonal plane, measured with respect to the <span>$x$</span>-axis.</p><p>Using the identity <span>$\cos 6x = -\sin^6 x + 15 \cos^2 x \sin^4 x - 15 \cos^4 x \sin^2 x + \cos^6 x$</span>, the energy density  can be rewritten in terms of <span>$m_x$</span>, <span>$m_y$</span>, and <span>$m_z$</span> as:</p><p class="math-container">\[E = K_1 (1 - m_z^2) + K_2 (1 - m_z^2)^2 + K_3 \left( m_x^6 - 15m_x^4 m_y^2 + 15m_x^2 m_y^4 - m_y^6 \right)\]</p><p>Therefore, The corresponding effective field is given by:</p><p class="math-container">\[\mathbf{H}_\mathrm{eff} = -\frac{6K_3}{\mu_0 M_s} \left( m_x^5 - 10m_x^3m_y^2 + 5m_xm_y^4 \right) \mathbf{e}_x 
 -\frac{6K_3}{\mu_0 M_s} \left( -5m_x^4m_y + 10m_x^2m_y^3 - m_y^5 \right) \mathbf{e}_y 
+ \frac{2m_z}{\mu_0 M_s} \left[ K_1 + 2K_2(1 - m_z^2) \right] \mathbf{e}_z\]</p><h3 id="Dzyaloshinskii-Moriya-Energy"><a class="docs-heading-anchor" href="#Dzyaloshinskii-Moriya-Energy">Dzyaloshinskii-Moriya Energy</a><a id="Dzyaloshinskii-Moriya-Energy-1"></a><a class="docs-heading-anchor-permalink" href="#Dzyaloshinskii-Moriya-Energy" title="Permalink"></a></h3><p>In the continuum limit, the DMI energy density <span>$w_\mathrm{dmi}$</span> is associated with the so-called <em>Lifshitz invariants</em>, which are terms in the form</p><p class="math-container">\[L^{(k)}_{ij} = m_i \frac{\partial m_j}{\partial x_k} - m_j \frac{\partial m_i}{\partial x_k}.\]</p><p>The form of DMI energy density varies depending on the symmetry class. For bulk DMI, corresponding to symmetry class <span>$T$</span> or <span>$O$</span>, the expression is given by: </p><p class="math-container">\[  w_\mathrm{dmi} = D(L^{(z)}_{yx} + L^{(y)}_{xz} + L^{(x)}_{zy}) = D \mathbf{m} \cdot (\nabla \times \mathbf{m}).\]</p><p>The associated effective field is</p><p class="math-container">\[  \mathbf{H}_\mathrm{dmi}=-\frac{2D}{\mu_0 M_s} (\nabla \times \mathbf{m}).\]</p><p>For a thin film with interfacial DMI or a crystal with symmetry class <span>$C_{nv}$</span>, the energy density is</p><p class="math-container">\[  w_\mathrm{dmi}=D (L_{x z}^{(x)}+L_{y z}^{(y)} )=D\left(\mathbf{m} \cdot \boldsymbol{\nabla} m_z-m_z \boldsymbol{\nabla} \cdot \mathbf{m}\right),\]</p><p>and the effective field is </p><p class="math-container">\[  \mathbf{H}_\mathrm{dmi}=-\frac{2 D}{\mu_0 M_s} (\mathbf{e}_y \times \frac{\partial \mathbf{m}}{\partial x} - \mathbf{e}_x \times \frac{\partial \mathbf{m}}{\partial y}).\]</p><p>For a crystal with symmetry class <span>$D_{2d}$</span>, the DMI energy density is given by <span>$w_{\mathrm{dmi}}=D (L_{x z}^{(y)}+L_{y z}^{(x)})$</span>, resulting in the effective field</p><p class="math-container">\[  \mathbf{H}_\mathrm{dmi}=-\frac{2 D}{\mu_0 M_s} (\mathbf{e}_y \times \frac{\partial \mathbf{m}}{\partial y} - \mathbf{e}_x \times \frac{\partial \mathbf{m}}{\partial x} ).\]</p><p>Although the effective fields for different symmetries differ, the numerical implementation can be unified as follows</p><p class="math-container">\[  \mathbf{H}_\mathrm{dmi, i} = -\frac{1}{\mu_0 M_s} \sum_{j \in N_i} D_{ij} \frac{\mathbf{e}_{ij} \times \mathbf{m}_j}{\Delta_{i j}},\]</p><p>where <span>$D_{ij}$</span> represents the effective DMI constant and <span>$\mathbf{e}_{ij}$</span> denotes the DMI vectors. For bulk DMI, <span>$\mathbf{e}_{ij} = \hat{\mathbf{r}}_{ij}$</span> where <span>$\hat{\mathbf{r}}_{ij}$</span> is the unit vector between cell <span>$i$</span> and cell <span>$j$</span>. For interfacial DMI,  <span>$\mathbf{e}_{ij} = \mathbf{e}_z \times \mathbf{\hat{r}}_{ij}$</span>, i.e., <span>$\mathbf{e}_{ij}=\{-\mathbf{e}_y, \mathbf{e}_y, \mathbf{e}_x, -\mathbf{e}_x, 0, 0\}$</span>  for the 6 neighbors <span>$N_{i}=\{-x,+x,-y,+y,-z, +z\}$</span>.  For the symmetry class <span>$D_{2d}$</span> one has <span>$\mathbf{e}_{ij}=\{\mathbf{e}_x, -\mathbf{e}_x, -\mathbf{e}_y, \mathbf{e}_y, 0, 0\}$</span>. If the cell-based DMI is provided, the effective DMI constant can be computed as</p><p class="math-container">\[  D_{i j}=\frac{2 D_i D_j}{D_i+D_j}.\]</p><ul><li><strong>Bulk DMI energy</strong> The Bulk DMI energy reads</li></ul><p class="math-container">\[  E_{\mathrm{dmi}} = \int_V D \mathbf{m} \cdot (\nabla \times \mathbf{m}) \, \mathrm{d}V\]</p><p>so the effective field is</p><p class="math-container">\[  \mathbf{H}_\mathrm{D}=-\frac{2 D}{\mu_{0} M_{s}}(\nabla \times \mathbf{m})\]</p><ul><li><strong>Magnetostatic energy</strong></li></ul><p class="math-container">\[  E_{\mathrm{d}}=-\frac{\mu_{0}}{2} \int_{V} \mathbf{H}_{\mathrm{d}}(\mathbf{r}) \cdot \mathbf{M}(\mathbf{r}) d V\]</p><p class="math-container">\[  \mathbf{H}_{\mathrm{d}}(\mathbf{r})=\frac{1}{4 \pi}\left(\int_{V} \rho_{m}\left(\mathbf{r}^{\prime}\right) \frac{\mathbf{r}-\mathbf{r}^{\prime}}{\left|\mathbf{r}-\mathbf{r}^{\prime}\right|^{3}} \mathrm{d}^{3} r^{\prime}+\int_{S} \sigma_{m}\left(\mathbf{r}^{\prime}\right) \frac{\mathbf{r}-\mathbf{r}^{\prime}}{\left|\mathbf{r}-\mathbf{r}^{\prime}\right|^{3}} \mathrm{d}^{2} r^{\prime}\right)\]</p><h2 id="LLG-equation"><a class="docs-heading-anchor" href="#LLG-equation">LLG equation</a><a id="LLG-equation-1"></a><a class="docs-heading-anchor-permalink" href="#LLG-equation" title="Permalink"></a></h2><p>The driver <code>LLG</code> solves the standard LLG equation, which can be written as</p><p class="math-container">\[\frac{\partial \mathbf{m}}{\partial t} = - \gamma \mathbf{m} \times \mathbf{H} + \alpha \mathbf{m} \times  \frac{\partial \mathbf{m}}{\partial t}\]</p><p>and the corresponding LL form is given by</p><p class="math-container">\[(1+\alpha^2)\frac{\partial \mathbf{m}}{\partial t} = - \gamma \mathbf{m} \times \mathbf{H} - \alpha \gamma \mathbf{m} \times (\mathbf{m} \times \mathbf{H})\]</p><h2 id="LLG-equation-with-extensions"><a class="docs-heading-anchor" href="#LLG-equation-with-extensions">LLG equation with extensions</a><a id="LLG-equation-with-extensions-1"></a><a class="docs-heading-anchor-permalink" href="#LLG-equation-with-extensions" title="Permalink"></a></h2><h3 id="Spin-transfer-torque"><a class="docs-heading-anchor" href="#Spin-transfer-torque">Spin transfer torque</a><a id="Spin-transfer-torque-1"></a><a class="docs-heading-anchor-permalink" href="#Spin-transfer-torque" title="Permalink"></a></h3><p>In micromagnetics, the spin transfer torque is modelled with the extended LLG equation Zhang-Li extension,  which reads</p><p class="math-container">\[\frac{\partial \mathbf{m}}{\partial t} = - \gamma \mathbf{m} \times \mathbf{H} + \alpha \mathbf{m} \times  \frac{\partial \mathbf{m}}{\partial t}
+ (\mathbf{u} \cdot \nabla) \mathbf{m} - \beta [\mathbf{m}\times (\mathbf{u} \cdot \nabla)\mathbf{m}]\]</p><p>where </p><p class="math-container">\[\mathbf{u} = \frac{p g \mu_B}{2 e M_s} \mathbf{j}\]</p><p>represents the strength of the current. The unit of <span>$\mathbf{u}$</span> is m/s.  In the definition of  <span>$\mathbf{u}$</span>, <span>$p$</span> is the spin polarization of the electric current, <span>$e(&gt;0)$</span> is the elementary charge, <span>$M_s$</span> is the saturation magnetization and <span>$\mathbf{j}$</span> is electric current density.</p><p>For the atomistic model, </p><p class="math-container">\[\mathbf{u} = \frac{p g \mu_B a^3}{2 e \mu_s} \mathbf{j} = \frac{p a^3}{2 e S} \mathbf{j}.\]</p><p>where <span>$S = |\mathbf{S}|$</span> is the length of local spin.</p><p>In MicroMagnetic, the the extended LLG equation Zhang-Li extension is implemented in the driver <code>LLG_STT</code>.   Moreover, the driver <code>LLG_CPP</code> implements the LLG equation with spin transfer torque for the current-perpendicular-to-plane (CPP) case,</p><p class="math-container">\[\frac{\partial \mathbf{m}}{\partial t} = - \gamma \mathbf{m} \times \mathbf{H} + \alpha \mathbf{m} \times  \frac{\partial \mathbf{m}}{\partial t} - a_J \mathbf{m} \times (\mathbf{m} \times \mathbf{p})
 -  b_J \mathbf{m} \times \mathbf{p}\]</p><p>The spin valve structures and  spin orbit torques can use the <code>LLG_CPP</code> driver.</p><p>The driver <code>LLG_STT_CPP</code> has put them together,</p><p class="math-container">\[\frac{\partial \mathbf{m}}{\partial t} = - \gamma \mathbf{m} \times \mathbf{H} + \alpha \mathbf{m} \times  \frac{\partial \mathbf{m}}{\partial t}
+ (\mathbf{u} \cdot \nabla) \mathbf{m} - \beta [\mathbf{m}\times (\mathbf{u} \cdot \nabla)\mathbf{m}] - a_J \mathbf{m} \times (\mathbf{m} \times \mathbf{p})
 -  b_J \mathbf{m} \times \mathbf{p}\]</p><h3 id="Spin-transfer-torque-as-effective-field."><a class="docs-heading-anchor" href="#Spin-transfer-torque-as-effective-field.">Spin transfer torque as effective field.</a><a id="Spin-transfer-torque-as-effective-field.-1"></a><a class="docs-heading-anchor-permalink" href="#Spin-transfer-torque-as-effective-field." title="Permalink"></a></h3><p>The spin transfer torque can also be considered as an effective field. For example, the LLG equation with CPP STT can be rewritten as </p><p class="math-container">\[\frac{\partial \mathbf{m}}{\partial t} = - \gamma \mathbf{m} \times (\mathbf{H}_\mathrm{stt}+\mathbf{H}_\mathrm{eff}) + \alpha \mathbf{m} \times  \frac{\partial \mathbf{m}}{\partial t}\]</p><p>with <span>$\mathbf{H}_\mathrm{stt} = (1/\gamma)(a_J \mathbf{m} \times \mathbf{p} +  b_J \mathbf{p})$</span>. Similarly, note that  <span>$(\mathbf{u} \cdot \nabla) \mathbf{m} = - \mathbf{m} \times [ \mathbf{m} \times (\mathbf{u} \cdot \nabla) \mathbf{m}] $ and thus,  for zhang-li model, we have  $\mathbf{H}_\mathrm{stt} = (1/\gamma)[\mathbf{m} \times (\mathbf{u} \cdot \nabla) \mathbf{m} + \beta (\mathbf{u} \cdot \nabla) \mathbf{m}]$</span>. </p><h2 id="SLLG-equation"><a class="docs-heading-anchor" href="#SLLG-equation">SLLG equation</a><a id="SLLG-equation-1"></a><a class="docs-heading-anchor-permalink" href="#SLLG-equation" title="Permalink"></a></h2><p>The SLLG equation, i.e., LLG equation including the stochastic field <span>$\mathbf{b}$</span>, is given by</p><p class="math-container">\[\frac{\partial \mathbf{m}}{\partial t} = - \gamma \mathbf{m} \times (\mathbf{H}_\mathrm{eff} +\mathbf{b}) + \alpha \mathbf{m} \times  \frac{\partial \mathbf{m}}{\partial t}\]</p><p>The thermal fluctuation is assumed to be a Gaussian white noise, i.e., the thermal noise <span>$\mathbf{b}$</span> obeys the  properties</p><p class="math-container">\[\left&lt; \mathbf{b} \right&gt; = 0, \;\;\; \left&lt; \mathbf{b}_i^u \cdot \mathbf{b}_j^v \right&gt; = 2 D \delta_{ij} \delta_{uv}\]</p><p>where <span>$i$</span> and <span>$j$</span> are Cartesian indices, <span>$u$</span> and <span>$v$</span> indicate the magnetization components and <span>$\left&lt; \cdot , \cdot \right&gt;$</span> represents the average taken over different realizations of the fluctuating field. And</p><p class="math-container">\[D = \frac{\alpha k_B T}{\gamma \mu_s}.\]</p><p>For the micromagnetic case, <span>$D$</span> is given as</p><p class="math-container">\[D = \frac{\alpha k_B T}{\mu_0 M_s \gamma \Delta V}.\]</p><p>which is equivalent to a stochastic field  </p><p class="math-container">\[\mathbf{b}^u = \eta \sqrt \frac{2 \alpha k_B T}{\mu_0 M_s \gamma \Delta V dt}\]</p><p>where <span>$\eta$</span> is a random number follows the normal distribution.</p><h2 id="Steepest-descent-method"><a class="docs-heading-anchor" href="#Steepest-descent-method">Steepest descent method</a><a id="Steepest-descent-method-1"></a><a class="docs-heading-anchor-permalink" href="#Steepest-descent-method" title="Permalink"></a></h2><p>We provide a steepest descent energy minimization method for a complicated system, which is of the form</p><p class="math-container">\[x_{k+1} = x_k + \alpha_k d_k\]</p><p>where</p><p class="math-container">\[d_k = - \nabla f(x_k)\]</p><p>And for the micromagnetics, we have</p><p class="math-container">\[\mathbf{m}_{k+1} = \mathbf{m}_{k} - {\tau}_k \mathbf{m}_k  \times (\mathbf{m}_k \times \mathbf{H}_{\mathrm{eff}})\]</p><p>In practice, we use the following update rule to keep the magnetization vector normalized.</p><p class="math-container">\[\boldsymbol{m}_{k+1}=\boldsymbol{m}_{k}-{\tau}_k \frac{\boldsymbol{m}_{k}+\boldsymbol{m}_{k+1}}{2} \times\left(\boldsymbol{m}_{k} \times \boldsymbol{H}_{\mathrm{eff}}\left(\boldsymbol{m}_{k}\right)\right)\]</p><p class="math-container">\[\boldsymbol{m}_{k+1}^2 = \boldsymbol{m}_{k}^2\]</p><p>From the equation we have:</p><p class="math-container">\[(1+\frac{{\tau}_k^2}{4} \boldsymbol{f}_k^2)\mathbf{m}_{k+1} =
(1-\frac{{\tau}_k^2}{4} \boldsymbol{f}_k^2)\mathbf{m}_{k} -  {\tau}_k \mathbf{g}_k\]</p><p>where</p><p class="math-container">\[\begin{aligned}
\mathbf{f}_k&amp; = \mathbf{m}_k \times \mathbf{H}_{\mathrm{eff}}
\\\boldsymbol{g}_{k} &amp;=\boldsymbol{m}_{k} \times\left(\boldsymbol{m}_{k} \times \boldsymbol{H}_{\mathrm{eff}}\right)
\end{aligned}\]</p><p>The step size <span>$\tau_k$</span> can be computed by</p><p class="math-container">\[\tau_{k}^{1}=\frac{\sum_{i} \boldsymbol{s}_{k-1}^{i} \cdot \boldsymbol{s}_{k-1}^{i}}{\sum_{i} \boldsymbol{s}_{k-1}^{i} \cdot \boldsymbol{y}_{k-1}^{i}} \quad, \quad \tau_{k}^{2}=\frac{\sum_{i} \boldsymbol{s}_{k-1}^{i} \cdot \boldsymbol{y}_{k-1}^{i}}{\sum_{i} \boldsymbol{y}_{k-1}^{i} \cdot \boldsymbol{y}_{k-1}^{i}}\]</p><p>where</p><p class="math-container">\[\begin{aligned}  \boldsymbol{s}_{k-1} &amp;=\boldsymbol{m}_{k}-\boldsymbol{m}_{k-1} \\ \boldsymbol{y}_{k-1} &amp;=\boldsymbol{g}_{k}-\boldsymbol{g}_{k-1} \end{aligned}\]</p><h2 id="Monte-Carlo-Simulation"><a class="docs-heading-anchor" href="#Monte-Carlo-Simulation">Monte Carlo Simulation</a><a id="Monte-Carlo-Simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Monte-Carlo-Simulation" title="Permalink"></a></h2><p>The implemented energy reads</p><p class="math-container">\[\mathcal{H} = -\sum_{\langle i, j\rangle} \left( J_x S_i^x  S_j^x + J_y S_i^y  S_j^y + J_z S_i^z  S_j^z \right)

+ \sum_{\langle i, j\rangle}  \mathbf{D}_{i j} \cdot\left(\mathbf{S}_{i} \times \mathbf{S}_{j}\right)

- K \sum_{i}\left(\mathbf{u} \cdot \mathbf{S}_i\right)^2 - \sum_{i} \mathbf{H} \cdot \mathbf{S}_i\]</p><p>where <span>$\mathbf{S}_i$</span> is unit vector of the classical spin at site <em>i</em>.</p><p>For interfacial DMI,</p><p class="math-container">\[\mathbf{D}_{i j} = D \hat{z} \times \hat{r}_{ij}  + D_z^{j} \hat{z}\]</p><p>while for Bulk DMI, </p><p class="math-container">\[\mathbf{D}_{i j} = D \hat{r}_{ij}\]</p><p>Note that the Monte Carlo only works for triangular and cubic meshes.</p><h2 id="NEB-(Nudged-elastic-band)"><a class="docs-heading-anchor" href="#NEB-(Nudged-elastic-band)">NEB (Nudged elastic band)</a><a id="NEB-(Nudged-elastic-band)-1"></a><a class="docs-heading-anchor-permalink" href="#NEB-(Nudged-elastic-band)" title="Permalink"></a></h2><p>NEB is a chain method to find the MEP (minimum energy path) between two states. To start, we need to construct a chain including several images (each image is a copy of the magnetization) and then relax the system. Two ends images that corresponding to the initial and final states will be pinned as they are the energy states given by the users. The system contain all free images will be relaxed to reduce the total energy, which is very similar to the case that relaxing the magnetic system using LLG equation if one disables the precession term. One significant difference is that the effective field in LLG equation is the functional derivative of the system energy with respect to magnetization while in NEB the effective field of image <em>n</em> should also contain the influence of its neighbours (i.e., the images <em>n-1</em> and <em>n+1</em>). This influence is described by the so-called tangents: only the perpendicaular part of the effective field is kept when relaxing the whole system.</p><p>Assume that the whole system has <em>N</em> images</p><p class="math-container">\[\mathbf{Z} = [\mathbf{Y}_1, \mathbf{Y}_2, ..., \mathbf{Y}_N]\]</p><p>where</p><p class="math-container">\[\mathbf{Y}_i = [m_{1x}, m_{1y}, m_{1z}, ..., m_{nx}, m_{ny}, m_{nz}]\]</p><p>each image has <em>n</em> spins. To relax the system, we could solve the equation</p><p class="math-container">\[\frac{\mathbf{Y}_i}{\partial t} = - \mathbf{Y}_i \times (\mathbf{Y}_i \times \mathbf{G}_i)\]</p><p>where <span>$\mathbf{G}_i$</span> is effective field that can be computed as</p><p class="math-container">\[\mathbf{Y}_i = \mathbf{H}_i - (\mathbf{H}_i \cdot \mathbf{t}_i) \mathbf{t}_i +  \mathbf{F}_i\]</p><p>The <span>$\mathbf{H}_i$</span> is the normal micromagnetic effective field, <span>$\mathbf{t}_i$</span> is the tangent and <span>$\mathbf{F}_i$</span> is a force that can be used to adjust the distance between images.</p><p class="math-container">\[ \mathbf{F}_i = k (|\mathbf{Y}_{i+1}-\mathbf{Y}_{i}|-|\mathbf{Y}_{i}-\mathbf{Y}_{i-1}|) \mathbf{t}_i\]</p><p>The distance bewteen images <span>$\mathbf{Y}_{i}$</span> and <span>$\mathbf{Y}_{j}$</span> is defined as</p><p class="math-container">\[ L = \left [ \sum_k (L_k^{i,j})^2 \right ] ^{1/2}\]</p><p>where <span>$L_k^{i,j}$</span> is the geodesic distance of point <code>k</code> that can be computed using Vincenty&#39;s formula.</p><p>The tangents can be computed as follows</p><p class="math-container">\[\mathbf{t}_i^+ =  \mathbf{Y}_{i+1}-\mathbf{Y}_{i}\\
\mathbf{t}_i^- =  \mathbf{Y}_{i}-\mathbf{Y}_{i-1}\]</p><p>The detailed equations can be found @ [Journal of Chemical Physics 113, 22 (2000)] and [Computer Physics Communications 196 (2015) 335–347].</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorials/neb/neb_skx/">« Skyrmion collapse using NEB</a><a class="docs-footer-nextpage" href="../api/">API for users »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Sunday 16 February 2025 04:33">Sunday 16 February 2025</span>. Using Julia version 1.10.8.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
