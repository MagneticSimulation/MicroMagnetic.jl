<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Standard Problem 5 (sim_with) · MicroMagnetic.jl</title><meta name="title" content="Standard Problem 5 (sim_with) · MicroMagnetic.jl"/><meta property="og:title" content="Standard Problem 5 (sim_with) · MicroMagnetic.jl"/><meta property="twitter:title" content="Standard Problem 5 (sim_with) · MicroMagnetic.jl"/><meta name="description" content="Documentation for MicroMagnetic.jl."/><meta property="og:description" content="Documentation for MicroMagnetic.jl."/><meta property="twitter:description" content="Documentation for MicroMagnetic.jl."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><script src="../../../assets/init.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">MicroMagnetic.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><a class="tocitem" href="../../../basics/">Basics</a></li><li><a class="tocitem" href="../../../units/">Units</a></li><li><span class="tocitem">Tutorials</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox" checked/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Micromagnetics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../nanobar/">Nanobar</a></li><li><a class="tocitem" href="../vortex/">Magnetic vortex</a></li><li><a class="tocitem" href="../std4_sim_with/">Standard Problem 4 (sim_with)</a></li><li><a class="tocitem" href="../std4/">Standard Problem 4</a></li><li class="is-active"><a class="tocitem" href>Standard Problem 5 (sim_with)</a></li><li><a class="tocitem" href="../std5/">Standard Problem 5</a></li><li><a class="tocitem" href="../skyrmion_stt/">Skyrmion dynamics under spin transfer torques</a></li><li><a class="tocitem" href="../stoner_wohlfarth/">Stoner–Wohlfarth model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Atomistic</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../atomistic/skyrmion/">Magnetic skyrmion</a></li><li><a class="tocitem" href="../../atomistic/skyrmion_lattice/">Skyrmion lattice</a></li><li><a class="tocitem" href="../../atomistic/skyrmion_afm/">Antiferromagnetic skyrmion</a></li><li><a class="tocitem" href="../../atomistic/sllg/">Stochastic LLG</a></li><li><a class="tocitem" href="../../atomistic/phase_diagram/">Phase diagram</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Monte carlo</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../monte_carlo/M_T_curve/">M-T curve using Monte Carlo</a></li><li><a class="tocitem" href="../../monte_carlo/skyrmion/">Skyrmion Phase using Monte Carlo</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Neb</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../neb/neb_skx/">Skyrmion collapse using NEB</a></li></ul></li></ul></li><li><a class="tocitem" href="../../../equations/">Equations</a></li><li><a class="tocitem" href="../../../api/">API for users</a></li><li><a class="tocitem" href="../../../api_dev/">API for developers</a></li><li><a class="tocitem" href="../../../contrib/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li><a class="is-disabled">Micromagnetics</a></li><li class="is-active"><a href>Standard Problem 5 (sim_with)</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Standard Problem 5 (sim_with)</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/MagneticSimulation/MicroMagnetic.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/MagneticSimulation/MicroMagnetic.jl/blob/master/docs/tutorials/micromagnetics/std5_sim_with.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Standard-Problem-5-(sim_with)"><a class="docs-heading-anchor" href="#Standard-Problem-5-(sim_with)">Standard Problem 5 (sim_with)</a><a id="Standard-Problem-5-(sim_with)-1"></a><a class="docs-heading-anchor-permalink" href="#Standard-Problem-5-(sim_with)" title="Permalink"></a></h1><p><a href="../std5_sim_with.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <a href="https://nbviewer.jupyter.org/github/MagneticSimulation/MicroMagnetic.jl/blob/gh-pages/v0.3.9/tutorials/micromagnetics/std5_sim_with.ipynb"><img src="https://img.shields.io/badge/show-nbviewer-579ACA.svg" alt="notebook"/></a> <img src="https://img.shields.io/badge/Author-Weiwei%20Wang-blue" alt="Author"/></p><p>Micromagnetic Standard Problem 5 involves simulating the dynamics of a magnetic vortex in a thin rectangular film under the influence of a spin-polarized current. The problem is designed to test the accuracy of micromagnetic simulations in capturing the complex behavior of vortex structures, including their motion and deformation. The rectangular film in this example has dimensions of 100 nm × 100 nm × 10 nm, and the simulation tracks the position of the vortex core as it evolves over time due to the combined effects of exchange interactions, demagnetization, and spin-transfer torques.</p><pre><code class="language-julia hljs">using MicroMagnetic
using Printf
using CairoMakie

@using_gpu()</code></pre><p>Define a function to initialize a vortex roughly.</p><pre><code class="language-julia hljs">function init_fun(i, j, k, dx, dy, dz)
    x = i - 10
    y = j - 10
    r = sqrt(x^2 + y^2)
    if r &lt; 2
        return (0, 0, 1)
    end
    return (y / r, -x / r, 0)
end</code></pre><pre><code class="nohighlight hljs">init_fun (generic function with 1 method)</code></pre><p>Define simulation parameters.</p><pre><code class="language-julia hljs">args = (name=&quot;std5&quot;, task_s=[&quot;relax&quot;, &quot;dynamics&quot;],          # List of tasks to perform
        driver_s=[&quot;SD&quot;, &quot;LLG_STT&quot;],            # List of drivers to use
        mesh=FDMesh(; nx=20, ny=20, nz=2, dx=5e-9, dy=5e-9, dz=5e-9), # Mesh configuration
        Ms=8e5,                               # Saturation magnetization
        A=1.3e-11,                            # Exchange constant
        demag=true,                           # Enable demagnetization
        m0=init_fun,                          # Initial magnetization function
        alpha=0.1,                            # Gilbert damping parameter
        ux=-72.438,                           # Effective current density
        beta=0.05,                            # Nonadiabatic STT parameter
        steps=160,                            # Number of steps for dynamics
        dt=0.05ns,                            # Time step size
        stopping_dmdt=0.01,                   # Stopping criterion for relaxation
        saver_item=SaverItem((&quot;Rx&quot;, &quot;Ry&quot;), (&quot;&lt;m&gt;&quot;, &quot;&lt;m&gt;&quot;), compute_guiding_center),    #vortex center tracking
        dynamic_m_interval=1);</code></pre><p>Run the simulation using <code>sim_with</code> function.</p><pre><code class="language-julia hljs">sim_with(args);</code></pre><pre><code class="nohighlight hljs">[ Info: MicroSim has been created.
[ Info: Exchange has been added.
[ Info: Running Driver : MicroMagnetic.EnergyMinimization{Float64}.
[ Info: max_dmdt is less than stopping_dmdt=0.01 @steps=174, Done!
[ Info: The driver LLG_STT is used!
................................................................................................................................................................
[ Info: step =  160  t = 8.000000e-09
</code></pre><p>Generate a movie for the vortex dynamics.</p><pre><code class="language-julia hljs">jld2movie(&quot;std5.jld2&quot;; output=&quot;assets/std5.mp4&quot;, component=&#39;z&#39;, figsize=(400, 400))</code></pre><pre><code class="nohighlight hljs">&quot;assets/std5.mp4&quot;</code></pre><p><video src="../assets/std5.mp4" controls="true" title><a href="../assets/std5.mp4"></a></video></p><hr/><p><em>This page was generated using <a href="https://github.com/JuliaDocs/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../std4/">« Standard Problem 4</a><a class="docs-footer-nextpage" href="../std5/">Standard Problem 5 »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Sunday 16 February 2025 04:33">Sunday 16 February 2025</span>. Using Julia version 1.10.8.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
